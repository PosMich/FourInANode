<!doctype html>
<html lang="de">
<head>
    <meta charset="utf-8" />
    <title>Four In A Node</title>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
    <script src="http://localhost:8080/socket.io/socket.io.js"></script>
    <!--[if IE]>
        <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <script>
        var socket = io.connect('http://localhost:8080');

        socket.on("update player name successful", function( data ) {
            console.log("new name successfully set to: "+data);
        });
        socket.on("update Opponents", function(data) {
          console.log("OPPONENTS: ");
          $(".opponents").empty();
          for (var i=0; i<data.length; i++) {
            $(".opponents").append("<li>"+data[i].clientname+"@"+data[i].ip+" "+data[i].keepalive+"</li>");
          }
          console.log(data);
        });

        socket.on("incoming Request", function(data) {
          console.log("incoming Request");
          socket.emit("stop Broadcast");
        })
  </script>
  <script type="css">
  :invalid {
    border: 2px solid #ff0000;
  }
  </script>
</head>
<body>
  <p>
    <input type="text" id="name" placeholder="Mein Name">
    <button id="setName">Name setzen</button>
  </p>
  <p>
    <input type="text" id="ip" placeholder="IP">
    <button id="setIP">IP setzen</button>
  </p>
  <p>
    <button id="broadcast">Broadcast starten</button>
  </p>
    <ul class="opponents"></ul>
  <p>
    <button id="startRequest">Anfrage starten</button>
  </p>
  <p>
    <button id="acceptRequest">Anfrage akzeptieren</button>
  </p>
  <p><a href="#" id="start">Start searching</a></p>
  <div id="found"></div>
</body>
<script>
$(document).ready(function(){
    $("#setName").click( function(e) {
        e.preventDefault();
        console.log("try 'set Name'");
        socket.emit("set Name", $("#name").val());
        console.log("emit 'set Name'");
    });

    $("#setIP").click( function(e) {
        e.preventDefault();
        socket.emit("set IP", $("#name").val());
    });

    $("#broadcast").click( function(e) {
        e.preventDefault();
        socket.emit("find Opponents");
    });

    $("#startRequest").click( function(e) {
        e.preventDefault();
    });

    $("#acceptRequest").click( function(e) {
        e.preventDefault();
    });
});
</script>
</html>